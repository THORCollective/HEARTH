<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEARTH - Threat Hunting Exchange</title>
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B4FE1Q174V"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-B4FE1Q174V');
    </script>
</head>
<body>
    <header>
        <div class="header-content">
            <a href="index.html" class="logo-link">
                <img src="/Assets/HEARTH-logo.png" alt="HEARTH Logo" class="logo"/>
                <div class="title-section">
                    <p class="eyebrow">THOR Collective</p>
                    <h1>HEARTH</h1>
                    <p>Hunting Exchange and Research Threat Hub</p>
                </div>
            </a>
            <div class="header-links">
                <a href="submit.html" class="btn btn-accent"><span class="btn-icon">üìù</span>Submit a Hunt</a>
                <a href="https://github.com/THORCollective/HEARTH" target="_blank" class="btn btn-ghost"><span class="btn-icon">üåê</span>View on GitHub</a>
            </div>
        </div>
    </header>

    <main>
        <section class="intro">
            <div class="intro-content">
                <h2>Threat Hunting Database</h2>
                <p>Explore curated threat hunting ideas organized using the PEAK threat hunting framework.</p>
                <div class="intro-meta">
                    <span class="meta-pill">Live library</span>
                    <span class="meta-pill">Community powered</span>
                    <span class="meta-pill">PEAK aligned</span>
                </div>
                <div class="intro-highlights" aria-live="polite">
                    <article class="highlight-card">
                        <span class="highlight-label">Hunts cataloged</span>
                        <span class="highlight-value" id="introTotalHunts">0</span>
                        <span class="highlight-sub">Across all categories</span>
                    </article>
                    <article class="highlight-card">
                        <span class="highlight-label">Distinct tactics</span>
                        <span class="highlight-value" id="introTotalTactics">0</span>
                        <span class="highlight-sub">MITRE ATT&CK coverage</span>
                    </article>
                    <article class="highlight-card">
                        <span class="highlight-label">Community authors</span>
                        <span class="highlight-value" id="introTotalContributors">0</span>
                        <span class="highlight-sub">Sharing research insights</span>
                    </article>
                </div>
            </div>
        </section>

        <section class="controls">
            <div class="controls-top">
                <div class="search-container">
                    <label for="searchInput" class="visually-hidden">Search hunts</label>
                    <div class="search-wrapper">
                        <span class="search-icon">üîç</span>
                        <input type="text" id="searchInput" placeholder="Search hunts by title, tactic, tags, or submitter..." class="search-input" autocomplete="off">
                        <button id="clearSearch" class="clear-btn" type="button" style="display: none;">Clear</button>
                    </div>
                    <p class="search-hint">Tip: try "persistence baseline" or "LOLBIN"</p>
                </div>
                <div class="stats">
                    <span id="huntCount" class="hunt-count">Loading hunts...</span>
                    <span id="resultMeta" class="result-meta"></span>
                    <span id="searchFeedback" class="search-feedback" role="status" aria-live="polite"></span>
                </div>
            </div>

            <!-- Filter Panel -->
            <div class="controls-middle">
                <div class="quick-filter">
                    <label for="categoryFilter">Category</label>
                    <select id="categoryFilter" class="filter-select">
                        <option value="">All categories</option>
                        <option value="Flames">Flames</option>
                        <option value="Embers">Embers</option>
                        <option value="Alchemy">Alchemy</option>
                    </select>
                </div>
                <div class="quick-filter">
                    <label for="sortHunts">Sort</label>
                    <select id="sortHunts" class="filter-select">
                        <option value="id-desc">Newest hunts</option>
                        <option value="id-asc">Oldest hunts</option>
                        <option value="title-asc">Title A-Z</option>
                        <option value="title-desc">Title Z-A</option>
                    </select>
                </div>
            </div>

            <!-- Advanced Filters -->
            <div class="advanced-filters">
                <div class="filter-section">
                    <div class="filter-section__header">
                        <h3 class="filter-section__title">Tactics</h3>
                        <button id="clearTactics" class="clear-filters-btn" style="display: none;">Clear</button>
                    </div>
                    <div id="tacticChips" class="filter-chips"></div>
                </div>

                <div class="filter-section">
                    <div class="filter-section__header">
                        <h3 class="filter-section__title">Popular Tags</h3>
                        <button id="clearTags" class="clear-filters-btn" style="display: none;">Clear</button>
                    </div>
                    <div id="tagChips" class="filter-chips"></div>
                </div>
            </div>
        </section>

        <!-- Loading indicator -->
        <div id="loading" class="loading">
            <p>Loading hunt database...</p>
        </div>

        <!-- Hunt grid (populated by TypeScript) -->
        <div id="huntsGrid" class="hunts-grid"></div>
    </main>

    <!-- Vite injects module script here during dev, bundle during build -->
    <script type="module" src="/src/main.ts"></script>
</body>
</html>
